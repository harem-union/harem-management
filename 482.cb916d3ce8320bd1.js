"use strict";(self.webpackChunkgame_management=self.webpackChunkgame_management||[]).push([[482],{2482:(K,I,d)=>{d.r(I),d.d(I,{RegistrationComponent:()=>X});var t=d(4438),m=d(177),o=d(9417),F=d(4616),v=d(1413),c=d(6977),k=d(7396),T=function(e){return e.NO_RANK="No Rank",e.BRONZE="Bronze",e.SILVER="Silver",e.GOLD="Gold",e.PLATINUM="Platinum",e.DIAMOND="Diamond",e.MASTER="Master",e.GRANDMASTER="Grandmaster",e}(T||{}),$=d(4981),S=d(2956),M=d(8032),l=d.n(M);function A(e,s){if(1&e&&(t.j41(0,"div",6)(1,"h2",7),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",44)(5,"div",45)(6,"div",46),t.EFF(7),t.k0s(),t.j41(8,"div",47),t.EFF(9),t.nI1(10,"translate"),t.k0s()(),t.j41(11,"div",45)(12,"div",48),t.EFF(13),t.k0s(),t.j41(14,"div",47),t.EFF(15),t.nI1(16,"translate"),t.k0s()(),t.j41(17,"div",45)(18,"div",49),t.EFF(19),t.nI1(20,"translate"),t.k0s(),t.j41(21,"div",47),t.EFF(22),t.nI1(23,"translate"),t.k0s()()(),t.j41(24,"div",50),t.nrm(25,"div",51),t.k0s(),t.j41(26,"div",52),t.EFF(27),t.nI1(28,"number"),t.nI1(29,"translate"),t.k0s()()),2&e){const r=t.XpG();t.R7$(2),t.JRh(t.bMT(3,15,"REGISTRATION_STATUS")),t.R7$(5),t.JRh(r.registrationStatus.current),t.R7$(2),t.JRh(t.bMT(10,17,"CURRENT_REGISTRATIONS")),t.R7$(4),t.JRh(r.registrationStatus.max),t.R7$(2),t.JRh(t.bMT(16,19,"MAX_CAPACITY")),t.R7$(3),t.HbH(r.registrationStatus.is_full?"text-red-600 dark:text-red-400":"text-yellow-600 dark:text-yellow-400"),t.R7$(),t.SpI(" ",r.registrationStatus.is_full?"FULL":t.bMT(20,21,"OPEN")," "),t.R7$(3),t.JRh(t.bMT(23,23,"STATUS")),t.R7$(3),t.HbH(r.getRegistrationProgressPercentage()>=90?"bg-red-500":r.getRegistrationProgressPercentage()>=75?"bg-yellow-500":"bg-blue-500"),t.xc7("width",r.getRegistrationProgressPercentage(),"%"),t.R7$(2),t.Lme(" ",t.i5U(28,25,r.getRegistrationProgressPercentage(),"1.0-0"),"% ",t.bMT(29,28,"FULL")," ")}}function j(e,s){1&e&&(t.j41(0,"div",6)(1,"div",53),t.nrm(2,"div",54),t.j41(3,"span",55),t.EFF(4,"Loading..."),t.k0s()()())}function N(e,s){if(1&e&&(t.j41(0,"div",56)(1,"div",57),t.qSk(),t.j41(2,"svg",58),t.nrm(3,"path",59),t.k0s(),t.joV(),t.j41(4,"span",60),t.EFF(5),t.k0s()()()),2&e){const r=t.XpG();t.R7$(5),t.JRh(r.errorMessage)}}function C(e,s){1&e&&(t.j41(0,"div",61),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"VALIDATION.REQUIRED")," "))}function D(e,s){1&e&&(t.j41(0,"div",61),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"VALIDATION.REQUIRED")," "))}function G(e,s){if(1&e&&(t.j41(0,"option",18),t.EFF(1),t.k0s()),2&e){const r=s.$implicit;t.Y8G("value",r),t.R7$(),t.JRh(r)}}function B(e,s){1&e&&(t.j41(0,"div",61),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"VALIDATION.REQUIRED")," "))}function P(e,s){1&e&&(t.j41(0,"div",61),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"VALIDATION.REQUIRED")," "))}function J(e,s){1&e&&(t.j41(0,"div",61),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"VALIDATION.REQUIRED")," "))}function Y(e,s){1&e&&(t.j41(0,"div",61),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"VALIDATION.REQUIRED")," "))}function L(e,s){1&e&&(t.j41(0,"div",61),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"VALIDATION.REQUIRED")," "))}function O(e,s){1&e&&(t.j41(0,"div",61),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"VALIDATION.REQUIRED")," "))}function U(e,s){1&e&&t.nrm(0,"span",62)}function w(e,s){if(1&e){const r=t.RV6();t.j41(0,"button",69),t.bIt("click",function(){t.eBV(r);const i=t.XpG().$implicit,a=t.XpG();return t.Njj(a.editPlayer(i))}),t.qSk(),t.j41(1,"svg",70),t.nrm(2,"path",71),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&e&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"EDIT")," "))}function V(e,s){if(1&e){const r=t.RV6();t.j41(0,"button",72),t.bIt("click",function(){t.eBV(r);const i=t.XpG().$implicit,a=t.XpG();return t.Njj(a.deletePlayer(i.id))}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"DELETE")," "))}function H(e,s){if(1&e){const r=t.RV6();t.j41(0,"tr")(1,"td",63),t.EFF(2),t.k0s(),t.j41(3,"td",63),t.EFF(4),t.k0s(),t.j41(5,"td",63),t.EFF(6),t.k0s(),t.j41(7,"td",63)(8,"span",64),t.EFF(9),t.nI1(10,"translate"),t.k0s()(),t.j41(11,"td",63),t.EFF(12),t.k0s(),t.j41(13,"td",63),t.EFF(14),t.k0s(),t.j41(15,"td",63)(16,"span",64),t.EFF(17),t.nI1(18,"translate"),t.k0s()(),t.j41(19,"td",63)(20,"button",65),t.bIt("click",function(){const i=t.eBV(r).$implicit,a=t.XpG();return t.Njj(a.updateUserStatus(i))}),t.EFF(21),t.nI1(22,"translate"),t.k0s()(),t.j41(23,"td",63),t.EFF(24),t.nI1(25,"date"),t.k0s(),t.j41(26,"td",63)(27,"div",66),t.DNE(28,w,5,3,"button",67)(29,V,3,3,"button",68),t.k0s()()()}if(2&e){const r=s.$implicit,n=t.XpG();t.R7$(2),t.JRh(r.uid),t.R7$(2),t.JRh(r.nickname),t.R7$(2),t.JRh(r.rank_level),t.R7$(2),t.HbH(n.getPayingPlayerBadgeClass(r.is_paying_player)),t.R7$(),t.SpI(" ",t.bMT(10,17,r.is_paying_player?"PAYING_PLAYER":"NON_PAYING_PLAYER")," "),t.R7$(3),t.JRh(r.role_in_game),t.R7$(2),t.JRh(r.referrer),t.R7$(2),t.HbH(n.getTeamBadgeClass(r.team)),t.R7$(),t.SpI(" ",t.bMT(18,19,r.team?"TEAM_"+r.team:"TEAM_NONE")," "),t.R7$(3),t.HbH(n.getStatusBadgeClass(r.status)),t.R7$(),t.SpI(" ",t.bMT(22,21,r.status?"ACTIVE":"INACTIVE")," "),t.R7$(3),t.SpI(" ",t.i5U(25,23,r.registration_date,"short")," "),t.R7$(4),t.Y8G("ngIf",n.authService.isAdmin()),t.R7$(),t.Y8G("ngIf",n.authService.isAdmin())}}function Q(e,s){1&e&&(t.j41(0,"tr")(1,"td",73),t.EFF(2),t.nI1(3,"translate"),t.k0s()()),2&e&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"NO_USERS")," "))}let X=(()=>{class e{constructor(){this.userApiService=(0,t.WQX)(k.l),this.errorHandlerService=(0,t.WQX)($.c),this.fb=(0,t.WQX)(o.ok),this.authService=(0,t.WQX)(S.u),this.destroy$=new v.B,this.players=[],this.registrationStatus=null,this.loading=!1,this.errorMessage="",this.rankLevels=Object.values(T),this.isEditing=!1,this.editingUserId=null,this.registrationForm=this.fb.group({uid:["",[o.k0.required]],nickname:["",[o.k0.required]],rank_level:["",[o.k0.required]],is_paying_player:[!0,[o.k0.required]],role_in_game:["",[o.k0.required]],referrer:[""],team:[""],status:[!0,[o.k0.required]]})}ngOnInit(){this.loadUsers(),this.loadRegistrationStatus(),this.checkForEditData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadUsers(){this.loading=!0,this.errorMessage="",this.userApiService.getUsers().pipe((0,c.Q)(this.destroy$)).subscribe({next:r=>{this.players=r,this.loading=!1},error:r=>{const n=this.errorHandlerService.handleError(r);this.errorMessage=`Failed to load users: ${n.message}`,this.loading=!1,l().fire({icon:"error",title:"\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14!",text:`\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e42\u0e2b\u0e25\u0e14\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e44\u0e14\u0e49: ${n.message}`,confirmButtonText:"\u0e15\u0e01\u0e25\u0e07"})}})}loadRegistrationStatus(){this.userApiService.getRegistrationStatus().pipe((0,c.Q)(this.destroy$)).subscribe({next:r=>{this.registrationStatus=r},error:r=>{console.error("Failed to load registration status:",r)}})}onSubmit(){if(this.registrationForm.valid){if(!this.isEditing&&this.registrationStatus?.is_full)return this.errorMessage="Registration is full. Cannot register new users.",void l().fire({icon:"warning",title:"\u0e01\u0e32\u0e23\u0e25\u0e07\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e40\u0e15\u0e47\u0e21\u0e41\u0e25\u0e49\u0e27!",text:"\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e25\u0e07\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e43\u0e2b\u0e21\u0e48\u0e44\u0e14\u0e49 \u0e40\u0e19\u0e37\u0e48\u0e2d\u0e07\u0e08\u0e32\u0e01\u0e08\u0e33\u0e19\u0e27\u0e19\u0e1c\u0e39\u0e49\u0e40\u0e02\u0e49\u0e32\u0e23\u0e48\u0e27\u0e21\u0e40\u0e15\u0e47\u0e21\u0e41\u0e25\u0e49\u0e27",confirmButtonText:"\u0e15\u0e01\u0e25\u0e07"});const r=this.isEditing?"\u0e41\u0e01\u0e49\u0e44\u0e02":"\u0e40\u0e1e\u0e34\u0e48\u0e21";l().fire({title:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e01\u0e32\u0e23\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23",text:`\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23${r}\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e19\u0e35\u0e49\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48?`,icon:"question",showCancelButton:!0,confirmButtonText:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19",cancelButtonText:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",reverseButtons:!0}).then(n=>{n.isConfirmed&&this.processFormSubmission()})}else l().fire({icon:"warning",title:"\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e44\u0e21\u0e48\u0e04\u0e23\u0e1a\u0e16\u0e49\u0e27\u0e19",text:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e01\u0e23\u0e2d\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e43\u0e2b\u0e49\u0e04\u0e23\u0e1a\u0e16\u0e49\u0e27\u0e19\u0e01\u0e48\u0e2d\u0e19\u0e2a\u0e48\u0e07\u0e1f\u0e2d\u0e23\u0e4c\u0e21",confirmButtonText:"\u0e15\u0e01\u0e25\u0e07"})}processFormSubmission(){if(this.loading=!0,this.errorMessage="",this.isEditing&&this.editingUserId){const r={...this.registrationForm.value};this.userApiService.updateUser(this.editingUserId,r).pipe((0,c.Q)(this.destroy$)).subscribe({next:n=>{const i=this.players.findIndex(a=>a.id===this.editingUserId);-1!==i&&(this.players[i]=n),this.resetForm(!1),this.loading=!1,l().fire({icon:"success",title:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08!",text:"\u0e41\u0e01\u0e49\u0e44\u0e02\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22\u0e41\u0e25\u0e49\u0e27",confirmButtonText:"\u0e15\u0e01\u0e25\u0e07",timer:2e3,timerProgressBar:!0})},error:n=>{const i=this.errorHandlerService.handleError(n);this.errorMessage=`Failed to update user: ${i.message}`,this.loading=!1,l().fire({icon:"error",title:"\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14!",text:`\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e41\u0e01\u0e49\u0e44\u0e02\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e44\u0e14\u0e49: ${i.message}`,confirmButtonText:"\u0e15\u0e01\u0e25\u0e07"})}})}else{const r={...this.registrationForm.value};this.userApiService.createUser(r).pipe((0,c.Q)(this.destroy$)).subscribe({next:n=>{this.players.push(n),this.resetForm(!1),this.loading=!1,this.loadRegistrationStatus(),l().fire({icon:"success",title:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08!",text:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22\u0e41\u0e25\u0e49\u0e27",confirmButtonText:"\u0e15\u0e01\u0e25\u0e07",timer:2e3,timerProgressBar:!0})},error:n=>{const i=this.errorHandlerService.handleError(n);this.errorMessage=`Failed to create user: ${i.message}`,this.loading=!1,l().fire({icon:"error",title:"\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14!",text:`\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e44\u0e14\u0e49: ${n.error.error}`,confirmButtonText:"\u0e15\u0e01\u0e25\u0e07"})}})}}resetForm(r=!0){this.registrationForm.reset({is_paying_player:!1,status:"active"}),this.isEditing=!1,this.editingUserId=null,r&&l().fire({icon:"info",title:"\u0e23\u0e35\u0e40\u0e0b\u0e47\u0e15\u0e1f\u0e2d\u0e23\u0e4c\u0e21",text:"\u0e1f\u0e2d\u0e23\u0e4c\u0e21\u0e16\u0e39\u0e01\u0e23\u0e35\u0e40\u0e0b\u0e47\u0e15\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22\u0e41\u0e25\u0e49\u0e27",confirmButtonText:"\u0e15\u0e01\u0e25\u0e07",timer:1500,timerProgressBar:!0})}deletePlayer(r){l().fire({title:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e01\u0e32\u0e23\u0e25\u0e1a",text:"\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e25\u0e1a\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e19\u0e35\u0e49\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48? \u0e01\u0e32\u0e23\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23\u0e19\u0e35\u0e49\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01\u0e44\u0e14\u0e49",icon:"warning",showCancelButton:!0,confirmButtonText:"\u0e25\u0e1a",cancelButtonText:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",confirmButtonColor:"#d33",reverseButtons:!0}).then(n=>{n.isConfirmed&&(this.loading=!0,this.errorMessage="",this.userApiService.deleteUser(r).pipe((0,c.Q)(this.destroy$)).subscribe({next:i=>{i&&(this.players=this.players.filter(a=>a.id!==r),this.loadRegistrationStatus(),l().fire({icon:"success",title:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08!",text:"\u0e25\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22\u0e41\u0e25\u0e49\u0e27",confirmButtonText:"\u0e15\u0e01\u0e25\u0e07",timer:2e3,timerProgressBar:!0})),this.loading=!1},error:i=>{const a=this.errorHandlerService.handleError(i);this.errorMessage=`Failed to delete user: ${a.message}`,this.loading=!1,l().fire({icon:"error",title:"\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14!",text:`\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e25\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e44\u0e14\u0e49: ${a.message}`,confirmButtonText:"\u0e15\u0e01\u0e25\u0e07"})}}))})}updateUserStatus(r){const n="active"===r.status?"inactive":"active",i="active"===n?"\u0e40\u0e1b\u0e34\u0e14\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19":"\u0e1b\u0e34\u0e14\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19";l().fire({title:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e01\u0e32\u0e23\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e2a\u0e16\u0e32\u0e19\u0e30",text:`\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23${i}\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e19\u0e35\u0e49\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48?`,icon:"question",showCancelButton:!0,confirmButtonText:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19",cancelButtonText:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",reverseButtons:!0}).then(a=>{a.isConfirmed&&this.userApiService.updateUser(r.id,{status:n}).pipe((0,c.Q)(this.destroy$)).subscribe({next:g=>{const u=this.players.findIndex(p=>p.id===r.id);-1!==u&&(this.players[u]=g),l().fire({icon:"success",title:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08!",text:`\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e2a\u0e16\u0e32\u0e19\u0e30\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e40\u0e1b\u0e47\u0e19${i}\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22\u0e41\u0e25\u0e49\u0e27`,confirmButtonText:"\u0e15\u0e01\u0e25\u0e07",timer:2e3,timerProgressBar:!0})},error:g=>{const u=this.errorHandlerService.handleError(g);this.errorMessage=`Failed to update user status: ${u.message}`,l().fire({icon:"error",title:"\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14!",text:`\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e2a\u0e16\u0e32\u0e19\u0e30\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e44\u0e14\u0e49: ${u.message}`,confirmButtonText:"\u0e15\u0e01\u0e25\u0e07"})}})})}getTeamBadgeClass(r){switch(r){case"A":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"B":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"C":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"D":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}}getStatusBadgeClass(r){return r?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}getPayingPlayerBadgeClass(r){return r?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}getRegistrationProgressPercentage(){return this.registrationStatus?this.registrationStatus.current/this.registrationStatus.max*100:0}checkForEditData(){const r=localStorage.getItem("editPlayerData");if(r)try{const n=JSON.parse(r);this.isEditing=!0,this.editingUserId=n.id,this.registrationForm.patchValue({uid:n.uid,nickname:n.nickname||n.gameName,rank_level:n.rank_level||n.rank,is_paying_player:n.is_paying_player||!1,role_in_game:n.role_in_game,referrer:n.referrer||"",team:n.team,status:n.status}),localStorage.removeItem("editPlayerData")}catch(n){console.error("Error parsing edit data:",n),localStorage.removeItem("editPlayerData")}}editPlayer(r){localStorage.setItem("editPlayerData",JSON.stringify(r)),this.checkForEditData()}confirmReset(){l().fire({title:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e01\u0e32\u0e23\u0e23\u0e35\u0e40\u0e0b\u0e47\u0e15",text:"\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e23\u0e35\u0e40\u0e0b\u0e47\u0e15\u0e1f\u0e2d\u0e23\u0e4c\u0e21\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48? \u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e17\u0e35\u0e48\u0e01\u0e23\u0e2d\u0e01\u0e08\u0e30\u0e2b\u0e32\u0e22\u0e44\u0e1b",icon:"warning",showCancelButton:!0,confirmButtonText:"\u0e23\u0e35\u0e40\u0e0b\u0e47\u0e15",cancelButtonText:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",reverseButtons:!0}).then(r=>{r.isConfirmed&&this.resetForm()})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-registration"]],standalone:!0,features:[t.aNF],decls:164,vars:149,consts:[[1,"space-y-6","opacity-bg-main","rounded-lg","p-6","shadow-lg"],[1,"opacity-bg-header","shadow","rounded-lg","p-6"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white","mb-2"],[1,"text-gray-600","dark:text-gray-400"],["class","opacity-bg-card shadow rounded-lg p-6",4,"ngIf"],["class","opacity-bg-card shadow rounded-lg p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",4,"ngIf"],[1,"opacity-bg-card","shadow","rounded-lg","p-6"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","formControlName","uid",1,"form-input","opacity-bg-input",3,"placeholder","readonly"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["type","text","formControlName","nickname",1,"form-input","opacity-bg-input",3,"placeholder"],["formControlName","rank_level",1,"form-select","opacity-bg-input"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","is_paying_player",1,"form-select","opacity-bg-input"],[3,"value"],["formControlName","role_in_game",1,"form-select","opacity-bg-input"],["value","Player"],["value","Captain"],["value","Coach"],["value","Manager"],["type","text","formControlName","referrer",1,"form-input","opacity-bg-input",3,"placeholder"],["formControlName","team",1,"form-select","opacity-bg-input"],["value","A"],["value","B"],["value","C"],["value","D"],["formControlName","status",1,"form-select","opacity-bg-input"],["value","true"],["value","false"],[1,"flex","justify-end","space-x-3"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],["class","animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2",4,"ngIf"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200","dark:divide-gray-700"],[1,"opacity-bg-table-header"],[1,"table-header"],[1,"opacity-bg-table-body","divide-y","divide-gray-200","dark:divide-gray-700"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-4"],[1,"text-center"],[1,"text-2xl","font-bold","text-blue-600","dark:text-blue-400"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"text-2xl","font-bold","text-green-600","dark:text-green-400"],[1,"text-2xl","font-bold"],[1,"w-full","bg-gray-200","dark:bg-gray-700","rounded-full","h-4","mb-2"],[1,"h-4","rounded-full","transition-all","duration-300"],[1,"text-sm","text-gray-600","dark:text-gray-400","text-center"],[1,"flex","items-center","justify-center"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"ml-2","text-gray-600","dark:text-gray-400"],[1,"opacity-bg-card","shadow","rounded-lg","p-4","bg-red-50","dark:bg-red-900/20","border","border-red-200","dark:border-red-800"],[1,"flex","items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-red-400","mr-2"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-red-800","dark:text-red-200"],[1,"text-red-500","text-sm","mt-1"],[1,"animate-spin","rounded-full","h-4","w-4","border-b-2","border-white","mr-2"],[1,"table-cell"],[1,"px-2","py-1","text-xs","font-medium","rounded-full","backdrop-blur-sm"],[1,"px-2","py-1","text-xs","font-medium","rounded-full","backdrop-blur-sm","cursor-pointer",3,"click"],[1,"flex","space-x-2"],["class","inline-flex items-center px-2 py-1 text-xs font-medium rounded text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors duration-200",3,"click",4,"ngIf"],["class","btn-danger text-xs px-2 py-1 bg-red-600/95 hover:bg-red-700/95 backdrop-blur-sm",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-2","py-1","text-xs","font-medium","rounded","text-blue-600","dark:text-blue-400","hover:bg-blue-50","dark:hover:bg-blue-900/20","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"btn-danger","text-xs","px-2","py-1","bg-red-600/95","hover:bg-red-700/95","backdrop-blur-sm",3,"click"],["colspan","10",1,"table-cell","text-center","text-gray-500","dark:text-gray-400"]],template:function(n,i){if(1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h1",2),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"p",3),t.EFF(6),t.nI1(7,"translate"),t.nI1(8,"translate"),t.k0s()(),t.DNE(9,A,30,30,"div",4)(10,j,5,0,"div",4)(11,N,6,1,"div",5),t.j41(12,"div",6)(13,"h2",7),t.EFF(14),t.nI1(15,"translate"),t.k0s(),t.j41(16,"form",8),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(17,"div",9)(18,"div")(19,"label",10),t.EFF(20),t.nI1(21,"translate"),t.k0s(),t.nrm(22,"input",11),t.nI1(23,"translate"),t.DNE(24,C,3,3,"div",12),t.k0s(),t.j41(25,"div")(26,"label",10),t.EFF(27),t.nI1(28,"translate"),t.k0s(),t.nrm(29,"input",13),t.nI1(30,"translate"),t.DNE(31,D,3,3,"div",12),t.k0s(),t.j41(32,"div")(33,"label",10),t.EFF(34),t.nI1(35,"translate"),t.k0s(),t.j41(36,"select",14)(37,"option",15),t.EFF(38),t.nI1(39,"translate"),t.k0s(),t.DNE(40,G,2,2,"option",16),t.k0s(),t.DNE(41,B,3,3,"div",12),t.k0s(),t.j41(42,"div")(43,"label",10),t.EFF(44),t.nI1(45,"translate"),t.k0s(),t.j41(46,"select",17)(47,"option",18),t.EFF(48),t.nI1(49,"translate"),t.k0s(),t.j41(50,"option",18),t.EFF(51),t.nI1(52,"translate"),t.k0s()(),t.DNE(53,P,3,3,"div",12),t.k0s(),t.j41(54,"div")(55,"label",10),t.EFF(56),t.nI1(57,"translate"),t.k0s(),t.j41(58,"select",19)(59,"option",15),t.EFF(60),t.nI1(61,"translate"),t.k0s(),t.j41(62,"option",20),t.EFF(63),t.nI1(64,"translate"),t.k0s(),t.j41(65,"option",21),t.EFF(66),t.nI1(67,"translate"),t.k0s(),t.j41(68,"option",22),t.EFF(69),t.nI1(70,"translate"),t.k0s(),t.j41(71,"option",23),t.EFF(72),t.nI1(73,"translate"),t.k0s()(),t.DNE(74,J,3,3,"div",12),t.k0s(),t.j41(75,"div")(76,"label",10),t.EFF(77),t.nI1(78,"translate"),t.k0s(),t.nrm(79,"input",24),t.nI1(80,"translate"),t.DNE(81,Y,3,3,"div",12),t.k0s(),t.j41(82,"div")(83,"label",10),t.EFF(84),t.nI1(85,"translate"),t.k0s(),t.j41(86,"select",25)(87,"option",15),t.EFF(88),t.nI1(89,"translate"),t.k0s(),t.j41(90,"option",26),t.EFF(91),t.nI1(92,"translate"),t.k0s(),t.j41(93,"option",27),t.EFF(94),t.nI1(95,"translate"),t.k0s(),t.j41(96,"option",28),t.EFF(97),t.nI1(98,"translate"),t.k0s(),t.j41(99,"option",29),t.EFF(100),t.nI1(101,"translate"),t.k0s()(),t.DNE(102,L,3,3,"div",12),t.k0s(),t.j41(103,"div")(104,"label",10),t.EFF(105),t.nI1(106,"translate"),t.k0s(),t.j41(107,"select",30)(108,"option",31),t.EFF(109),t.nI1(110,"translate"),t.k0s(),t.j41(111,"option",32),t.EFF(112),t.nI1(113,"translate"),t.k0s()(),t.DNE(114,O,3,3,"div",12),t.k0s()(),t.j41(115,"div",33)(116,"button",34),t.bIt("click",function(){return i.resetForm()}),t.EFF(117),t.nI1(118,"translate"),t.k0s(),t.j41(119,"button",35),t.DNE(120,U,1,0,"span",36),t.EFF(121),t.nI1(122,"translate"),t.k0s()()()(),t.j41(123,"div",6)(124,"h2",7),t.EFF(125),t.nI1(126,"translate"),t.k0s(),t.j41(127,"div",37)(128,"table",38)(129,"thead",39)(130,"tr")(131,"th",40),t.EFF(132),t.nI1(133,"translate"),t.k0s(),t.j41(134,"th",40),t.EFF(135),t.nI1(136,"translate"),t.k0s(),t.j41(137,"th",40),t.EFF(138),t.nI1(139,"translate"),t.k0s(),t.j41(140,"th",40),t.EFF(141),t.nI1(142,"translate"),t.k0s(),t.j41(143,"th",40),t.EFF(144),t.nI1(145,"translate"),t.k0s(),t.j41(146,"th",40),t.EFF(147),t.nI1(148,"translate"),t.k0s(),t.j41(149,"th",40),t.EFF(150),t.nI1(151,"translate"),t.k0s(),t.j41(152,"th",40),t.EFF(153),t.nI1(154,"translate"),t.k0s(),t.j41(155,"th",40),t.EFF(156),t.nI1(157,"translate"),t.k0s(),t.j41(158,"th",40),t.EFF(159),t.nI1(160,"translate"),t.k0s()()(),t.j41(161,"tbody",41),t.DNE(162,H,30,26,"tr",42)(163,Q,4,3,"tr",43),t.k0s()()()()()),2&n){let a,g,u,p,R,b,h,f,E;t.R7$(3),t.SpI(" ",t.bMT(4,63,"PLAYER_REGISTRATION")," "),t.R7$(3),t.Lme(" ",t.bMT(7,65,"REGISTRATION")," - ",t.bMT(8,67,"GAME_MANAGEMENT")," "),t.R7$(3),t.Y8G("ngIf",i.registrationStatus),t.R7$(),t.Y8G("ngIf",i.loading),t.R7$(),t.Y8G("ngIf",i.errorMessage),t.R7$(3),t.SpI(" ",i.isEditing?"EDIT_USER":t.bMT(15,69,"REGISTRATION")," "),t.R7$(2),t.Y8G("formGroup",i.registrationForm),t.R7$(4),t.SpI(" ",t.bMT(21,71,"UID")," * "),t.R7$(2),t.Y8G("placeholder",t.bMT(23,73,"UID"))("readonly",i.isEditing),t.R7$(2),t.Y8G("ngIf",(null==(a=i.registrationForm.get("uid"))?null:a.invalid)&&(null==(a=i.registrationForm.get("uid"))?null:a.touched)),t.R7$(3),t.SpI(" ",t.bMT(28,75,"NICKNAME")," * "),t.R7$(2),t.Y8G("placeholder",t.bMT(30,77,"NICKNAME")),t.R7$(2),t.Y8G("ngIf",(null==(g=i.registrationForm.get("nickname"))?null:g.invalid)&&(null==(g=i.registrationForm.get("nickname"))?null:g.touched)),t.R7$(3),t.SpI(" ",t.bMT(35,79,"RANK_LEVEL")," * "),t.R7$(4),t.JRh(t.bMT(39,81,"RANK_LEVEL")),t.R7$(2),t.Y8G("ngForOf",i.rankLevels),t.R7$(),t.Y8G("ngIf",(null==(u=i.registrationForm.get("rank_level"))?null:u.invalid)&&(null==(u=i.registrationForm.get("rank_level"))?null:u.touched)),t.R7$(3),t.SpI(" ",t.bMT(45,83,"IS_PAYING_PLAYER")," * "),t.R7$(3),t.Y8G("value",!0),t.R7$(),t.JRh(t.bMT(49,85,"PAYING_PLAYER")),t.R7$(2),t.Y8G("value",!1),t.R7$(),t.JRh(t.bMT(52,87,"NON_PAYING_PLAYER")),t.R7$(2),t.Y8G("ngIf",(null==(p=i.registrationForm.get("is_paying_player"))?null:p.invalid)&&(null==(p=i.registrationForm.get("is_paying_player"))?null:p.touched)),t.R7$(3),t.SpI(" ",t.bMT(57,89,"ROLE_IN_GAME")," * "),t.R7$(4),t.JRh(t.bMT(61,91,"ROLE_IN_GAME")),t.R7$(3),t.JRh(t.bMT(64,93,"PLAYER")),t.R7$(3),t.JRh(t.bMT(67,95,"CAPTAIN")),t.R7$(3),t.JRh(t.bMT(70,97,"COACH")),t.R7$(3),t.JRh(t.bMT(73,99,"MANAGER")),t.R7$(2),t.Y8G("ngIf",(null==(R=i.registrationForm.get("role_in_game"))?null:R.invalid)&&(null==(R=i.registrationForm.get("role_in_game"))?null:R.touched)),t.R7$(3),t.SpI(" ",t.bMT(78,101,"REFERRER")," "),t.R7$(2),t.Y8G("placeholder",t.bMT(80,103,"REFERRER")),t.R7$(2),t.Y8G("ngIf",(null==(b=i.registrationForm.get("referrer"))?null:b.invalid)&&(null==(b=i.registrationForm.get("referrer"))?null:b.touched)),t.R7$(3),t.SpI(" ",t.bMT(85,105,"TEAM")," * "),t.R7$(4),t.JRh(t.bMT(89,107,"TEAM_NONE")),t.R7$(3),t.JRh(t.bMT(92,109,"TEAM_A")),t.R7$(3),t.JRh(t.bMT(95,111,"TEAM_B")),t.R7$(3),t.JRh(t.bMT(98,113,"TEAM_C")),t.R7$(3),t.JRh(t.bMT(101,115,"TEAM_D")),t.R7$(2),t.Y8G("ngIf",(null==(h=i.registrationForm.get("team"))?null:h.invalid)&&(null==(h=i.registrationForm.get("team"))?null:h.touched)),t.R7$(3),t.SpI(" ",t.bMT(106,117,"STATUS")," * "),t.R7$(4),t.JRh(t.bMT(110,119,"ACTIVE")),t.R7$(3),t.JRh(t.bMT(113,121,"INACTIVE")),t.R7$(2),t.Y8G("ngIf",(null==(f=i.registrationForm.get("status"))?null:f.invalid)&&(null==(f=i.registrationForm.get("status"))?null:f.touched)),t.R7$(3),t.SpI(" ",t.bMT(118,123,i.isEditing?"CANCEL":"RESET")," "),t.R7$(2),t.Y8G("disabled",i.registrationForm.invalid||i.loading||!i.isEditing&&null!==(E=null==i.registrationStatus?null:i.registrationStatus.is_full)&&void 0!==E&&E),t.R7$(),t.Y8G("ngIf",i.loading),t.R7$(),t.SpI(" ",t.bMT(122,125,i.isEditing?"UPDATE":"REGISTER")," "),t.R7$(4),t.JRh(t.bMT(126,127,"USERS_LIST")),t.R7$(7),t.JRh(t.bMT(133,129,"UID")),t.R7$(3),t.JRh(t.bMT(136,131,"NICKNAME")),t.R7$(3),t.JRh(t.bMT(139,133,"RANK_LEVEL")),t.R7$(3),t.JRh(t.bMT(142,135,"IS_PAYING_PLAYER")),t.R7$(3),t.JRh(t.bMT(145,137,"ROLE_IN_GAME")),t.R7$(3),t.JRh(t.bMT(148,139,"REFERRER")),t.R7$(3),t.JRh(t.bMT(151,141,"TEAM")),t.R7$(3),t.JRh(t.bMT(154,143,"STATUS")),t.R7$(3),t.JRh(t.bMT(157,145,"REGISTRATION_DATE")),t.R7$(3),t.JRh(t.bMT(160,147,"ACTIONS")),t.R7$(3),t.Y8G("ngForOf",i.players),t.R7$(),t.Y8G("ngIf",0===i.players.length&&!i.loading)}},dependencies:[m.MD,m.Sq,m.bT,m.QX,m.vh,o.X1,o.qT,o.xH,o.y7,o.me,o.wz,o.BC,o.cb,o.j4,o.JD,F.h,F.D9],encapsulation:2})}}return e})()}}]);