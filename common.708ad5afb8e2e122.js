"use strict";(self.webpackChunkgame_management=self.webpackChunkgame_management||[]).push([[76],{3032:(E,u,s)=>{s.d(u,{B:()=>n});var a=s(4438),c=s(7907);let n=(()=>{class p{constructor(d){this.apiService=d,this.endpoint="/admin"}getPublicSettings(){return this.apiService.get(`${this.endpoint}/public-settings`)}getAdminSettings(){return this.apiService.get(`${this.endpoint}/settings`)}updateAdminSettings(d){return this.apiService.put(`${this.endpoint}/settings`,d)}getGameStats(){return this.apiService.get(`${this.endpoint}/stats`)}getTeamStats(){return this.apiService.get(`${this.endpoint}/team-stats`)}static{this.\u0275fac=function(i){return new(i||p)(a.KVO(c.G))}}static{this.\u0275prov=a.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})()},4981:(E,u,s)=>{s.d(u,{c:()=>c});var a=s(4438);let c=(()=>{class n{constructor(){}handleError(r){let d="An unexpected error occurred",i=500;r.error instanceof ErrorEvent?(d=r.error.message,i=0):(i=r.status,d=r.error&&"object"==typeof r.error&&r.error.message||this.getDefaultErrorMessage(i));const o={message:d,status:i,timestamp:(new Date).toISOString(),path:r.url||""};return this.logError(o),o}getDefaultErrorMessage(r){switch(r){case 400:return"Bad Request - Invalid data provided";case 401:return"Unauthorized - Please login again";case 403:return"Forbidden - Access denied";case 404:return"Not Found - Resource not available";case 409:return"Conflict - Resource already exists";case 422:return"Unprocessable Entity - Validation failed";case 500:return"Internal Server Error - Please try again later";case 502:return"Bad Gateway - Service temporarily unavailable";case 503:return"Service Unavailable - Please try again later";case 504:return"Gateway Timeout - Request timed out";default:return"An unexpected error occurred"}}logError(r){console.error("API Error:",{message:r.message,status:r.status,timestamp:r.timestamp,path:r.path})}isNetworkError(r){return 0===r.status||"Unknown Error"===r.statusText}isServerError(r){return r.status>=500}isClientError(r){return r.status>=400&&r.status<500}getErrorMessage(r){return this.handleError(r).message}static{this.\u0275fac=function(d){return new(d||n)}}static{this.\u0275prov=a.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})()},5036:(E,u,s)=>{s.d(u,{w:()=>o});var a=s(4438),c=s(2307),n=s(3032),p=s(8141),r=s(9437),d=s(7673),i=s(7396);let o=(()=>{class h{constructor(){this.userApiService=(0,a.WQX)(i.l),this.weaponApiService=(0,a.WQX)(c.m),this.adminApiService=(0,a.WQX)(n.B),this._players=(0,a.vPA)([]),this._weapons=(0,a.vPA)([]),this._adminSettings=(0,a.vPA)({start_date:new Date,max_participants:40}),this.players=this._players.asReadonly(),this.weapons=this._weapons.asReadonly(),this.adminSettings=this._adminSettings.asReadonly(),this.teamStats=(0,a.EWP)(()=>{const t=this._players(),_=this._adminSettings().max_participants/4,v=t.filter(g=>"A"===g.team).length,m=t.filter(g=>"B"===g.team).length,y=t.filter(g=>"C"===g.team).length,f=t.filter(g=>"D"===g.team).length;return[{teamId:"A",playerCount:v,maxPlayers:_,percentage:v/_*100},{teamId:"B",playerCount:m,maxPlayers:_,percentage:m/_*100},{teamId:"C",playerCount:y,maxPlayers:_,percentage:y/_*100},{teamId:"D",playerCount:f,maxPlayers:_,percentage:f/_*100}]}),this.totalPlayers=(0,a.EWP)(()=>this._players().length),this.loadInitialData()}loadInitialData(){this.loadPlayers(),this.loadWeapons(),this.loadAdminSettings()}loadPlayers(){this.userApiService.getUsers().pipe((0,p.M)(t=>{console.log("Loaded players from API:",t),this._players.set(t)}),(0,r.W)(t=>(console.error("Error loading players:",t),this._players.set([]),(0,d.of)([])))).subscribe()}loadWeapons(){this.weaponApiService.getWeapons().pipe((0,p.M)(t=>{console.log("Loaded weapons from API:",t),this._weapons.set(t)}),(0,r.W)(t=>(console.error("Error loading weapons:",t),this._weapons.set([]),(0,d.of)([])))).subscribe()}loadAdminSettings(){this.adminApiService.getPublicSettings().pipe((0,p.M)(t=>this._adminSettings.set(t.data)),(0,r.W)(t=>(console.error("Error loading admin settings:",t),(0,d.of)(this._adminSettings())))).subscribe()}getPlayersByTeam(t){return this._players().filter(l=>l.team===t)}getWeaponByUID(t){return this._weapons().find(l=>l.uid===t)}isUIDExists(t){return this._players().some(l=>l.uid===t)}refreshData(){this.loadPlayers(),this.loadWeapons(),this.loadAdminSettings()}static{this.\u0275fac=function(l){return new(l||h)}}static{this.\u0275prov=a.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},7396:(E,u,s)=>{s.d(u,{l:()=>i});var a=s(8810),c=s(6354),n=s(9437),p=s(4438),r=s(7907),d=s(4981);let i=(()=>{class o{constructor(e,t){this.apiService=e,this.errorHandler=t,this.endpoint="/users"}getUsers(){return this.apiService.get(this.endpoint).pipe((0,c.T)(e=>{if(e.success&&e.data&&e.data.users)return e.data.users;throw new Error("Invalid response format")}),(0,n.W)(e=>(this.errorHandler.handleError(e),(0,a.$)(()=>e))))}getRegistrationStatus(){return this.apiService.get(this.endpoint).pipe((0,c.T)(e=>{if(e.success&&e.data&&e.data.registration_status)return e.data.registration_status;throw new Error("Invalid response format")}),(0,n.W)(e=>(this.errorHandler.handleError(e),(0,a.$)(()=>e))))}getUserById(e){return this.apiService.get(`${this.endpoint}/${e}`).pipe((0,c.T)(t=>{if(t.success&&!Array.isArray(t.data))return t.data;throw new Error("Invalid response format")}),(0,n.W)(t=>(this.errorHandler.handleError(t),(0,a.$)(()=>t))))}createUser(e){return this.apiService.post(`${this.endpoint}/register`,e).pipe((0,c.T)(t=>{if(t.success&&!Array.isArray(t.data))return t.data;throw new Error("Invalid response format")}),(0,n.W)(t=>(this.errorHandler.handleError(t),(0,a.$)(()=>t))))}updateUser(e,t){return this.apiService.put(`${this.endpoint}/${e}`,t).pipe((0,c.T)(l=>{if(l.success&&!Array.isArray(l.data))return l.data;throw new Error("Invalid response format")}),(0,n.W)(l=>(this.errorHandler.handleError(l),(0,a.$)(()=>l))))}deleteUser(e){return this.apiService.delete(`${this.endpoint}/${e}`).pipe((0,c.T)(t=>t.success),(0,n.W)(t=>(this.errorHandler.handleError(t),(0,a.$)(()=>t))))}getUsersByTeam(e){return this.apiService.get(`${this.endpoint}/team/${e}`).pipe((0,c.T)(t=>{if(t.success&&t.data&&t.data.users)return t.data.users;throw new Error("Invalid response format")}),(0,n.W)(t=>(this.errorHandler.handleError(t),(0,a.$)(()=>t))))}getUsersByStatus(e){return this.apiService.get(`${this.endpoint}/status/${e}`).pipe((0,c.T)(t=>{if(t.success&&t.data&&t.data.users)return t.data.users;throw new Error("Invalid response format")}),(0,n.W)(t=>(this.errorHandler.handleError(t),(0,a.$)(()=>t))))}searchUsers(e){const t={};return e.query&&(t.query=e.query),e.team&&(t.team=e.team),e.status&&(t.status=e.status),e.role&&(t.role=e.role),void 0!==e.is_paying_player&&(t.is_paying_player=e.is_paying_player),e.rank_level&&(t.rank_level=e.rank_level),e.page&&(t.page=e.page),e.limit&&(t.limit=e.limit),this.apiService.get(`${this.endpoint}/search`,t).pipe((0,n.W)(l=>(this.errorHandler.handleError(l),(0,a.$)(()=>l))))}getUserStatistics(){return this.apiService.get(`${this.endpoint}/statistics`).pipe((0,n.W)(e=>(this.errorHandler.handleError(e),(0,a.$)(()=>e))))}static{this.\u0275fac=function(t){return new(t||o)(p.KVO(r.G),p.KVO(d.c))}}static{this.\u0275prov=p.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})()},2307:(E,u,s)=>{s.d(u,{m:()=>p});var a=s(6354),c=s(4438),n=s(7907);let p=(()=>{class r{constructor(i){this.apiService=i,this.endpoint="/weapons"}getWeapons(){return this.apiService.get(this.endpoint).pipe((0,a.T)(i=>i.data))}getWeaponByUid(i){return this.apiService.get(`${this.endpoint}/${i}`).pipe((0,a.T)(o=>o.data[0]))}createWeapon(i){return this.apiService.post(this.endpoint,i).pipe((0,a.T)(o=>o.data))}updateWeapon(i,o){return this.apiService.put(`${this.endpoint}/${i}`,o).pipe((0,a.T)(h=>h.data[0]))}deleteWeapon(i){return this.apiService.delete(`${this.endpoint}/${i}`)}getWeaponsByTeam(i){return this.apiService.get(`${this.endpoint}/team/${i}`).pipe((0,a.T)(o=>o.data))}getWeaponsByType(i){return this.apiService.get(`${this.endpoint}/type/${i}`).pipe((0,a.T)(o=>o.data))}static{this.\u0275fac=function(o){return new(o||r)(c.KVO(n.G))}}static{this.\u0275prov=c.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()}}]);